---
import CardSm from "./CardSm.astro";
import { getCollection } from 'astro:content';
const apps = await getCollection("apps");
const browsers = await getCollection("browsers");
const tools = await getCollection("tools");
import Android from "./icons/android.astro";

const collections = [apps, browsers, tools]

const mergedCollection = collections.flat();

const collectionAItems = mergedCollection.filter(item => item.data.apk);
---

<div class="flex flex-col px-5 p-10 my-10  md:px-5 lg:p-10 rounded-2xl m-5 relative bg-gradient-to-r from-lime-500 to-lime-100 overflow-hidden ">
    <img src="/icons/android.png" alt="" class="w-96  -rotate-12 absolute -z-0 top-0 right-0 animate-pulse">
    <div class="text-xl font-bold  flex items-center z-10">
        <svg enable-background="new 0 0 48 48" class="w-10 h-10 text-gray-100 dark:text-white " viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><g fill="white"><path d="m12 29.001c0 1.104-.896 2-2 2-1.104 0-2-.896-2-2v-9c0-1.104.896-2 2-2 1.104 0 2 .896 2 2z"/><path d="m40 29.001c0 1.104-.896 2-2 2-1.104 0-2-.896-2-2v-9c0-1.104.896-2 2-2 1.104 0 2 .896 2 2z"/><path d="m22 40c0 1.104-.896 2-2 2-1.104 0-2-.896-2-2v-9c0-1.104.896-2 2-2 1.104 0 2 .896 2 2z"/><path d="m30 40c0 1.104-.896 2-2 2-1.104 0-2-.896-2-2v-9c0-1.104.896-2 2-2 1.104 0 2 .896 2 2z"/><path d="m14 18.001v14.999c0 1.104.896 2 2 2h16c1.104 0 2-.896 2-2v-14.999z"/><path d="m24 8c-6 0-9.655 3.645-10 8h20c-.346-4.355-4-8-10-8zm-4 5.598c-.552 0-1-.448-1-1s.448-1 1-1 1 .448 1 1-.448 1-1 1zm8 0c-.553 0-1-.448-1-1s.447-1 1-1 1 .448 1 1-.447 1-1 1z"/></g><path d="m30 7-1.666 2.499" fill="none" stroke="#7cb342" stroke-linecap="round" stroke-width="2"/><path d="m18 7 1.333 2.082" fill="none" stroke="#7cb342" stroke-linecap="round" stroke-width="2"/></svg>
    <h2 class="text-white">Our Top Picks for Android</h2></div>
    <div class="grid gap-5 grid-cols-1 sm:grid-cols-1 md:grid-cols-4 lg:grid-cols-4  pt-10 z-10">
        <!-- <CardSm/> -->
        <!-- {collectionAItems.map((item) => (
            <CardSm title={item.data.title} rating={item.data.rating} url={`${item.data.collection}/${item.slug}`}/>
          ))} -->

          <!-- {collectionAItems
            .filter((item) => item.data.rating > 4.4)
            .map((item) => (
              <CardSm 
                title={item.data.title} 
                rating={item.data.rating} 
                url={`${item.data.collection}/${item.slug}`} 
                thumbnail = {item.data.thumbnail}
              />
            ))}
           -->
          
           {collectionAItems
            .filter((item) => item.data.rating > 4.2)
            .sort(() => Math.random() - 1) // Randomize the order of items
            .map((item) => (
              <CardSm 
                title={item.data.title} 
                rating={item.data.rating}
                category={item.data.category} 
                url={`${item.data.collection}/${item.slug}`} 
                thumbnail ={item.data.thumbnail}
              />
            ))}
    </div>
</div>
